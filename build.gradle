buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        google()
    }
}

apply plugin: "java-library"
apply plugin: "eclipse"
apply plugin: "idea"

compileJava {
    options.release = 11
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(11)
    }
}

dependencies {
    //NONE
}

project.ext.appName = "PokeMMO"
project.ext.mainClassName = "com.pokeemu.unix.UnixInstaller"
project.ext.mainJar = "unix-installer.jar"

def osName = System.getProperty('os.name').toLowerCase(Locale.ROOT)

jar {
  archiveFileName = project.mainJar

  duplicatesStrategy = DuplicatesStrategy.EXCLUDE

  manifest {
    attributes(
      'Main-Class': project.mainClassName
    )
  }
}

task distJar(type: GradleBuild) {
    buildName "distJar"
    startParameter.projectProperties = gradle.startParameter.projectProperties
    tasks = ['clean', 'jar']
}

assemble.dependsOn distJar
